{% extends "base.html" %}
{% block title %}Todos as Postagens do Forum{% endblock %}
{% block content %}
<div class="container mt-3">
	<div class="row justify-content-center">
	<div class="col-lg-8 col-md-10">
	        {% for postagem in postagens %}
        {% with data=postagem.data_publicacao|default:postagem.data_criacao %}
        <div class="p-3 mb-3 rounded-3 shadow-sm forum-surface">
            <div class="d-flex flex-column flex-md-row gap-3 align-items-start">
                <div class="text-center px-3 forum-date-pill">
                    <div class="display-5 fw-bold mb-0">{{ data|date:"d" }}</div>
                    <small class="text-muted text-uppercase">{{ data|date:"b. Y"|lower }}</small>
                </div>
                <div class="flex-grow-1">
                    <div class="d-flex justify-content-between flex-wrap gap-2">
                        <h4 class="mb-0 text-break"><a href="{% url 'detalhe-postagem-forum' postagem.id %}">{{postagem.titulo}}</a></h4>
                        <small class="text-muted">{{postagem.usuario.first_name}} {{postagem.usuario.last_name}}</small> 
                    </div>  
                    <div class="mt-2"> 
                        <p class="mb-0" style="display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;word-break:break-word;max-width:100%;">{{ postagem.descricao|striptags|truncatechars:230 }}</p> 
                    </div>
                </div>
            </div>
        </div> 
        {% endwith %}
        {% endfor %}
    </div> 
	</div>
</div>
{% endblock %}
